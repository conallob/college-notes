% $Id$

The architectural model of the system is relatively straightforward,
consisting of a client and a server. However, there are multiple
operational modes for each component.

\begin{figure}[ht]

\begin{center}
\ \xy<1cm,0cm>:
(3, 0) *=(2,2) !CR \txt{A} *\frm{-} ="nodeA" , 
(9, 0) *=(2,2) !CL \txt{B} *\frm{=} ="nodeB" , 
"nodeA" ; "nodeB" **\dir{-} *\dir{>} ?(0.5) *++!CC{1}*\frm{o} , 
\endxy
\end{center}

\label{fig:client}

\caption{Message 1 sent from Client A to Server B}

\end{figure}

\begin{figure}[ht]

\begin{center}
\ \xy<1cm,0cm>:
(3, 0) *=(2,2) !CR \txt{A} *\frm{-} ="nodeA" , 
(9, 4) *=(2,2) !CL \txt{B} *\frm{=} ="nodeB" , 
(9,-4) *=(2,2) !CL \txt{C} *\frm{=} ="nodeC" , 
"nodeA" ; "nodeC" **\dir{-} *\dir{>} ?(0.5) *++!CC{2}*\frm{o} , 
"nodeC"!CC ; "nodeB"!DC **\dir{-} *\dir{>} ?(0.5) *++!CC{2}*\frm{o} , 
\endxy
\end{center}

\caption{Message 2 sent from Client A to Server B, routed through Server C}

\label{fig:relay}

\end{figure}

\subsection{Operating Modes of the Client}

There are two operational modes for the client: direct and relayed.

Direct mode is a pure distributed system, using the peer to peer model.
When transmitting a message, a client connects directly to the
recipient node, as illustrated in Figure \ref{fig:client}.


Unfortunately, due to modern security concerns, it is often common 
practice to restrict access to non-local subnets by employing firewall
and/or routing table restrictions. Remote access is possible through
certain nodes, acting as proxies for allowed services. 


\subsection{Operating Modes of the Server}

The server can also operate in two modes: direct and proxy. When
operating in direct mode, the server accepts connections from the 
client, processes the message and attempts to deliver the message to a 
local user.


Alternatively, in proxy mode, the server simply accepts a message from a
client connection, buffers the message and relays it to the target 
destination, similar to the model currently used by SMTP, as depicted in
Figure \ref{fig:relay}.

\pagebreak

\input include/flow-chart

