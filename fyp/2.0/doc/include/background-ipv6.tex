% $Id $

\subsection{Introduction}

Over the last 25 years, since its standardisation in RFC 791, published
in 1981, IPv4 (known as IP) has proven to be very popular. Despite its 
popularity, it has some limitations, which have arisen over the years 
as new uses for IP connectivity are invented. Some even believe one of 
the key reasons for its popularity, Network Address Translation (NAT), 
is also a limitation, and in certain cases, it is. Other limitations
affecting IPv4 include address allocation, security concerns, growth of 
routing tables and quality of service (QoS).

\subsection{Issues with IPv4}

NAT is a method by which a network with private IP space, as defined in
RFC 1918, is masked behind a single or a few public, globally unique IP
address or addresses. NAT works by mapping certain TCP/IP ports between
addresses in the private address network and the public IP address(es).
While many find this useful, it does come at a cost, which is becoming
more and more expensive. Certain applications used in modern times to
not perform as expected when their IP datagrams are rewritten by a NAT
router. Additionally, certain applications, which shall be discussed
later, require a significant amount of TCP/IP ports, which are not
available in a NAT environment.


Initially, IPv4 address allocation was done in 3 categories, Class A, B
and C. Hindsight showed that this method was overly gratuitous and
wasted IPv4 addresses. As a result, CIDR addressing was created to slow 
down, but not stop IPv4 addresses being wasted. CIDR also managed to condense 
routing table information, formally known as routing prefix aggregation, 
which has slowed down another problem afflicting IPv4, where routing tables 
on core routers were growing out of control, with the addition of routes to
various class A, B and C address allocations.


IP addressing is not the only advantage IPv6 over IPv4. Numerous
supplementary functionality, such as Layer 3 multicast, that was added to IPv4 over 20 years.


Finally, in recent years, IPv4 has had many security concerns concerning
address spoofing, many of which are connected to security issues with
the Address Resolution Protocol (ARP), a protocol it uses to communicate
with Layer 2 protocols. ARP, by it's nature is an unauthenticated, 
broadcast protocol which is susceptible to attacks and "cache poisoning".
Finally, modern applications which require real-time QoS have also 
suffered from a certain inflexibility of IPv4 in adapting to suit their 
needs.


Due to the limitations of IPv4 and the various stop-gap solutions which
have been added over the years, the Internet Engineering Task Force
(IETF) decided to design a new, much more modular and flexible IP
protocol, with improvements over the design of IPv4, based upon the
enhancements added over the years and flaws causing limitations. This
protocol is IPv6.

\subsection{Improvements in IPv6}

As a result of how IPv4 was extended over the last 25 years, IPv6 has
been designed from the start to be extensible. The IPv6 header was been
redesigned to include only the key fields and defines an extensible
field, where option header information can be added.


One of the key differences noticed in IPv6, after the number of IP
numbers possible, is IPv6 auto-configuration. Current IPv4 networks often
employ DHCP to distribute stateful IP configurations to hosts on a
network. Using IPv6 autoconf, stateless configuration is also possible,
whereby a device can assign itself an IP number based upon an advertised
prefix and the MAC address of the connected interface. Mechanisms such
as DAD and ND are used to ensure IP addresses are unique.


IPv6 also implicitly encourages various good practices, such as prefix
routing (which is quite similar to CIDR) and multicasting (which is used
to contact defined network devices, such as routers). Additionally, 
optional features such as QoS, Mobile IP and IPsec can also be enabled 
with minimal extra effort.

\subsection{Further Information}

Further information about IPv6, both a more complete overview and
a more in depth technical description, are available in the O'Reilly
published IPv6 Network Administration by Niall Richard Murphy and 
David Malone.
