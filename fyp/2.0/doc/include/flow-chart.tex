% $Id$

\begin{figure}[Hbt]

%\begin{center}

\tiny 

\ \xy<1cm,0cm>:
(4, 20)      *=(2,1) \txt{Sender Inputs \\ Message} 										*\frm{-} ="s1",
(4, 18.5)    *=(2,1) \txt{Clients Buffers \\ Message} 										*\frm{-} ="s2",
(4, 17)      *=(2,1) \txt{Client Formats \\ Message} 										*\frm{-} ="s3",
(4, 15.5)    *=(2,1) \txt{Client Encrypts \\ Message} 										*\frm{-} ="s4",
(4, 14)      *=(2,1) \txt{Client Parses \\ Destination Host} 							*\frm{-} ="s5",
(4, 12)   *=(2,1) \txt{Is Destination \\ Localhost?} 									*\frm{-} ="s6" , % diamond
(8, 12) *=(2,1) \txt{Does \\ Destination \\ Exist?} 						*\frm{-} ="s61" , % diamond
(8, 10.5)   *=(2,1) \txt{Is \\ Destination \\ Available?} 						*\frm{-} ="s62" , % diamond
(4, 9.5)   *=(2,1) \txt{Connect to \\ Daemon And \\ Transmit Message} 	*\frm{-} ="s7",
(4, 8)    *=(2,1) \txt{Is Message \\ For This \\ Host?} 							*\frm{-} ="s8", % diamond
(0, 8)    *=(2,1) \txt{Relay \\ Message} 														*\frm{-} ="s81", 
(4, 6.5)    *=(2,1) \txt{Does \\ Recipient \\ Exist?} 							*\frm{-} ="s9", % diamond
(4, 5)    *=(2,1) \txt{Is \\ Recipient \\ Available?}								*\frm{-} ="s10",
(8, 5)    *=(2,1) \txt{Resort to \\ Email?} 													*\frm{-} ="s101",
(4, 3.5)    *=(2,1) \txt{Deliver \\ Message \\ To User}							*\frm{-} ="s11",
(4, 2)    *=(2,1) \txt{Recipient \\ Decrypts \\ Message?} 						*\frm{-} ="s12",
(8, 2)    *=(2,1) \txt{Recipient \\ Receives \\ Email} 						*\frm{-} ="s121",
(12, 2)  	 *=(2,1) \txt{Inform \\ Client \\ Of Error} 							*\frm{-} ="e",
%
"s1" !DC ; "s2" !UC **\dir{-} *\dir{>} ,
"s2" !DC ; "s3" !UC **\dir{-} *\dir{>} ,
"s3" !DC ; "s4" !UC **\dir{-} *\dir{>} ,
"s4" !DC ; "s5" !UC **\dir{-} *\dir{>} ,
"s5" !DC ; "s6" !UC **\dir{-} *\dir{>} ,
"s6" !DC ; "s7" !UC **\dir{-} *\dir{>} ,
"s7"  !DC ; "s8"  !UC **\dir{-} *\dir{>} ,
"s8"  !DC ; "s9"  !UC **\dir{-} *\dir{>} ,
"s9"  !DC ; "s10" !UC **\dir{-} *\dir{>} ,
"s10" !DC ; "s11" !UC **\dir{-} *\dir{>} ,
"s11" !DC ; "s12" !UC **\dir{-} *\dir{>} ,
%
"s6"  !CL ; "s61" !CL **\dir{-} *\dir{>} ,
"s61" !DC ; "s62" !UC **\dir{-} *\dir{>} ,
%
"s8"  !CL ; "s81" !CR **\dir{-} *\dir{>} ,
%
"s10"  !CL ; "s101" !CL **\dir{-} *\dir{>} ,
%
"s62"  !CR ; (4,10.5) !CL **\dir{-} *\dir{>} ,
%
"s101"  !DC ; "s121" !UC **\dir{-} *\dir{>} ,
%
"s101"  !DC ; "s121" !UC **\dir{-} *\dir{>} ,
%
"s81"  !UC ; (0, 13) **\dir{-} ; (4,13) **\dir{-} *\dir{>} ,
%
"s61"  !CR ; (12,12) **\dir{-} ; "e" !UC **\dir{-} *\dir{>} ,
"s62"  !CR ; (12,10.5) **\dir{-} *\dir{>} ,
%
"s101"  !CR ; (12,5) **\dir{-} *\dir{>} ,
%
"s9"  !CR ; (12,6.5) **\dir{-} *\dir{>} ,
\endxy

%\end{center}

\caption{Flow chart depicting designed behaviour of client and server}

\end{figure}
